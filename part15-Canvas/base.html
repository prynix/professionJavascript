<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <canvas id="drawing" width="200" height="200">A drawing of something</canvas>
  <script>
    var drawing = document.getElementById("drawing")

    // 确认浏览器支持<canvas>元素
    if (drawing.getContext) {
      var context = drawing.getContext('2d') // 2d上下文对象
      var imgURI = drawing.toDataURL('image/png') // 绘制到画布上的图像源自不同的域，该方法会抛错

      var image = document.createElement('img')
      image.src = imgURI
      document.body.appendChild(image)
    }

    // 2D上下文的两种基本绘图操作是填充和描边
    if (drawing.getContext) {
      var context = drawing.getContext('2d')
      context.strokeStyle = 'red'
      context.strokeRect(10, 10, 50, 50)
      context.strokeRect(30, 30, 50, 50)

      context.fillStyle = '#0000ff'
      context.fillRect(10, 10, 50, 50)

      context.fillStyle = 'rgba(0,0,255,0.5)'
      context.fillRect(30, 30, 50, 50)
      context.lineWidth = 10 // ??
      context.lineCap = 'round' // ??
      context.lineJoin = 'round' // ??

      context.clearRect(40, 40, 10, 10)

      var fontSize = 100
      context.font = fontSize + 'px Arial'

      // measureText: 辅助确定文本大小
      while(context.measureText("Hello world!").width > 140) {
        fontSize--;
        context.font = fontSize + 'px Arial'
      }

      context.fillText("Hello world!", 10, 10)
      context.fillText("font size is " + fontSize + "px", 10, 50)
    }

  </script>
</body>
</html>